<script src="//maps.google.com/maps/api/js?key=AIzaSyBRkajFk38d_24oT0mo8rkMWb1_fJHSMW8"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
      <!-- Heading Row -->
      <div class="row my-4">

        <div class="col-lg-8" style="display: flex; flex-direction: row; justify-content: space-between;">
          <div style='width: 700px;'>


            <h2><b><%= @message.address %></b></h2>

            <div id="map" style='width: 700px; height: 450px;'></div>

          </div>
        </div>
        <!-- /.col-lg-8 -->
        <div class="col-lg-4">
          <h2>Status: <b><%= @message.status %></b></h2>
          <br />
          <div>
            <%= render partial: 'messages/change_status', locals: { message: @message } %>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-8 mb-8">
          <div class="card h-100">
            <div class="card-body">
              <h2 class="card-title"><%= @message.body %></h2>
            </div>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <div class="card-body">
              <h2 class="card-title">Free space</h2>
              <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Rem magni quas ex numquam, maxime minus quam molestias corporis quod, ea minima accusamus.</p>
            </div>
            <div class="card-footer">
              <a href="#" class="btn btn-primary">More Info</a>
            </div>
          </div>
        </div>

        <div class="col-md-12">

        </div>
      </div>
<script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {mapTypeId: 'hybrid'}, internal: {id: 'map'}}, function(){
        markers = handler.addMarkers(<%=raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
    });
</script>
